<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="./docbook-complete.css" type="text/css"?>
<article>
  <articleinfo>
    <title></title>

    <legalnotice>
      <para>This Manual is released under the Creative Commons License, this
      manual may be quoted, and freely distributed as long as credit is given
      in written form to http://www.denemo.org. If it is placed on a web page
      a link to the denemo site should also appear.</para>
    </legalnotice>

    <copyright>
      <year>2008</year>

      <holder>Denemo Project</holder>
    </copyright>

    <author>
      <firstname>Aaron</firstname>

      <surname>Mehl</surname>

      <email>aamehl@actcom.net.il</email>
    </author>
    <author>
      <firstname>Richard</firstname>

      <surname>Shann</surname>

      <email>Richard.Shann**at**virgin.com</email>
    </author>

    <productname>Denemo <productnumber>1</productnumber></productname>

    <releaseinfo>0.8.0</releaseinfo>
  </articleinfo>

  <sect1>
    <title>Introduction</title>

    <para>Denemo lets you create musical scores. You can type music in using the keyboard 
    or play it in using a MIDI contoller or the microphone input. You can edit your music - the display shows you the measures you
    are working on - and you can playback selected bits to check how it sounds. 
    You can preview and print the score or parts to the highest standards used in the music publishing industry 
    - thanks to the Lilypond typesetting program.</para>
    <para>Denemo does not attempt to show the appearance of the finished score, it just shows you enough to enable you to enter the music efficiently. To see the finished score you press Print Preview.</para>

  <sect1>
    <title>Obtaining and Installing Denemo</title>

    <para>Denemo is available from a variety of sources for different
    distributions. The latest stable release (tar.gz and .deb formats) is
    available for download from <ulink
    url="http://download.savannah.gnu.org/releases/denemo/"></ulink>. You can install
    Denemo from the Debian unstable repositories, using the command apt-get
    install denemo. Builds for Macintosh are available from the Gnu-Darwin
    project. The Denemo development branch can be downloaded using anonymous
    CVS or Git.</para>
	    <para>Anonymous Git checkout:</para>

	    <para>git clone git://git.savannah.gnu.org/denemo.git</para>
    
	    <para>Anonymous CVS checkout:</para> 
	    <para>cvs -d:pserver:anonymous@pserver.git.sv.gnu.org:/denemo.git co -d denemo master</para>
 

  </sect1>
    <sect2>
      <title>Dependencies</title>

      <para>To build Denemo from a source package, the following
      dependent packages should be installed first. Remember to install the
      development packages as well (check your distribution for the specific
      package name):<note>
          <title>For Debian Users</title>

          <para>Type <command>apt-cache showsrc denemo</command> at a command
          line to determine what are the package names for Denemo
          dependencies. Type <command>apt-get build-dep denemo</command> to
          build the dependent files or use apt-get to install the packages
          individually by copying and pasting there names to the command
          line.</para>
        </note></para>

      <itemizedlist>
        <listitem>
          <para>g++ 2.95 or higher</para>
        </listitem>

        <listitem>
          <para>flex 2.5.4a or higher</para>
        </listitem>

        <listitem>
          <para>bison 1.35 or higher</para>
        </listitem>

        <listitem>
          <para>cdbs</para>
        </listitem>

        <listitem>
          <para>gettext</para>
        </listitem>

        <listitem>
          <para>libgtk2.0-dev</para>
        </listitem>

        <listitem>
          <para>gtk+ 2</para>
        </listitem>

        <listitem>
          <para>libglib2.0-dev</para>
        </listitem>

        <listitem>
          <para>libxml2</para>
        </listitem>

        <listitem>
          <para>libxml2-dev</para>
        </listitem>

        <listitem>
          <para>LilyPond 2.4</para>
        </listitem>

        <listitem>
          <para>autoconf 2.59 or higher</para>
        </listitem>

        <listitem>
          <para>automake1.7</para>
        </listitem>

        <listitem>
          <para>libaubio</para>
        </listitem>
        <listitem>
          <para>libfftw3-dev</para>
        </listitem>

        <listitem>
          <para>libportaudio</para>
        </listitem>


      </itemizedlist>
    </sect2>

    <sect2>
      <title>Optional Includes</title>

      <para>Denemo uses other applications for  playback and printing. You may need to install the following applications, and edit the preferences menu to tell Denemo which you want it to use.</para>

      <itemizedlist>
        <listitem>
          <para>csound (optional, www.csounds.com)</para>
        </listitem>

        <listitem>
          <para>A PDF viewer (ghostview, evince etc)</para>
        </listitem>

        <listitem>
          <para>A midi player such as timidity</para>
        </listitem>
	<listitem>
          <para>An image viewer such as EOG</para>
        </listitem>

      </itemizedlist>
    </sect2>

    <sect2>
      <title>Installing Denemo from Source Code</title>

      <para>Denemo is available in a variety of formats. The current stable
      release is available either as source code or in binary format. The
      Development branch of Denemo is available as a GIT source tree.</para>

      <procedure>
        <title>To install from source code:</title>

        <step>
          <para>Open a terminal window.</para>
        </step>

        <step>
          <para>Change directories to the directory to which you downloaded
          the Denemo source package.</para>
        </step>

        <step>
          <para>Uncompress the source package using standard Linux tools (tar
          and gunzip).</para>
        </step>

        <step>
          <para>Change directories to the uncompressed directory.</para>
        </step>
      </procedure>

      <procedure>
        <title>Generating a Configure Script</title>

        <para>Git does not come with a Configure script; generate one by
        typing and pressing Enter after the line:</para>

        <step>
          <para>./autogen.sh</para>
        </step>
      </procedure>

      <sect3>

        <procedure>
          <title>To compile from source, press Enter after each line:</title>

          <step>
            <para>./configure.</para>
          </step>

          <step>
            <para>make.</para>
          </step>

          <step>
            <para>make install.</para>
          </step>

          <step>
            <para>If you are not logged in as root user, type su and your root
            password, or alternately type sudo and your user password.</para>
          </step>
        </procedure>
      </sect3>
    </sect2>
  </sect1>

  <sect1>
    <title>Getting Started</title>
    <para>On starting a Denemo up to two music scores (called init.denemo) are loaded, and any actions associated with them are run. The first of these is provided with the system and does essential initialization, the second you can provide yourself in the file ~/denemo/actions/init.denemo (where ~ means your home directory).
</para>
    <para>In addition, on startup a set of keyboard and mouse shortcuts, and a selection of optional menu items are loaded. If you have a Numeric Keypad you may wish to start with an alternative set (Edit-&gt;Customize Commands Shortcuts...-&gt;Manage Command Set and click on "Load a Standard Command Set" to get this. Save it for next time using "Save as Default Command Set").
</para>
 <sect2>
<title>Some Common Keyboard Shortcuts</title>
<para>Here are a few of the keyboard shortcuts that are commonly used in Denemo.
    <itemizedlist>
      <listitem>
      Letters A-G are used to refer to the notes A-G, either moving the cursor, inserting or editing depending on mode.
      </listitem>
      <listitem>
      Numbers 0-6 are used to refer to the note durations Whole Note ... 64th note, inserting, changing the prevailing duration or editing depending on mode. The corresponding Numeric Keypad keys are used if you choose that command set.
      </listitem>
      <listitem>
      "." dots a note, Ctrl-"." undots it.
      </listitem>
    </itemizedlist>
</para>
 </sect2>
 <sect2>
<title>Some Common Mouse Shortcuts</title>
<para>Here are a few of the mouse shortcuts that are commonly used in Denemo.
    <itemizedlist>
      <listitem>
      Shift Key and Left mouse button drags notes up and down.
      </listitem>
      <listitem>
      CapsLock with Left mouse drag inserts a slur
      </listitem>
      <listitem>
      CapsLock with Left mouse drag inserts a slur
      </listitem>
      <listitem>
      CapsLock AND Shift key with Left mouse drag inserts a crescendo
      </listitem>
      <listitem>
      CapsLock AND AltGr key with Left mouse drag inserts a diminuendo
      </listitem>
    </itemizedlist>
</para>
 </sect2>
    <para>Denemo is used via the computer keyboard, MIDI controller or playing in via a musical instrument. A few mouse operations are also included by default. Clicking on the score will select items, and the status bar at the bottom will describe the item clicked. Selections can be made by dragging with the mouse from one note to another. And right-clicking any menu item gets help and the opportunity to set a shortcuts for the menu item. Furthermore, scripts are available in the menu system that give the mouse further uses.</para>
 </sect1>
  <sect1>
    <title>Movements</title>

    <para>
Each Denemo file represents a piece of music which may consist of several “movements”, interspersed with headings. These might be different songs in a song book, or literally the movements in a classical sonata, or any other pieces of music that you want to print out in a book form with titles, page numbering and so on.
    </para>



         <note>
            <para>When a file is loaded it opens with the final movement set as the current movement.</para>
          </note>
  </sect1>
  <sect1>
    <title>The Denemo Window</title>
    <figure>
      <title>Main Window</title>

      <mediaobject>
        <imageobject>
          <imagedata fileref="images/denemomain.png" />
        </imageobject>
      </mediaobject>
    </figure>
<para>
The main window has menus and toolbars at the top and then the drawing area where the music input is displayed - just the few measures you are working on. At the bottom is a status line showing which movement you are in and what sort of object the cursor is on. If there are any MIDI filters that active they will be noted at the right in the status bar. The small colored rectangle is the Denemo Cursor, which shows where notes etc will be added/edited next. Selected music is colored blue and outlined with a blue rectangle.
</para>
<para>
The menus in Denemo are unusual: they not only let you do some particular action, but also each menu item lets you enquire what the action does in more detail and lets you set keyboard/mouse shortcuts for the actions. All this extra functionality &amp; more comes with right-clicking the menu item, while the usual left click is for executing the action itself. The menus can always be torn off for working with particular items (e.g. working with different movements or with measures, dynamics etc.). Also available by right-clicking is creating new actions - often by modifying ones that are already there.
</para>
  </sect1>
  <sect1>
    <title>The Main Menubar</title>


    <para>The Main Menubar has submenus for overall control of the program. It
    contains the following submenus:</para>

    <itemizedlist>
      <listitem>
        <para>File</para>
      </listitem>

      <listitem>
        <para>Edit</para>
      </listitem>

      <listitem>
        <para>View</para>
      </listitem>

      

      <listitem>
        <para>Mode</para>
      </listitem>

 

 

      <listitem>
        <para>Playback</para>
      </listitem>
      <listitem>
        <para>More</para>
      </listitem>

      <listitem>
        <para>Help</para>
      </listitem>
    </itemizedlist>

    <sect2>
      <title>File</title>

      <para>Use the <guimenu>File</guimenu> menu to perform global operations related to storing and retrieving from file systems.
      The File menu contains the following Menu Items:</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>New</entry>

              <entry>Create score from scratch.</entry>
            </row>

            <row>
              <entry>Open</entry>

              <entry>Open an existing <productname>Denemo</productname>
              file.</entry>
            </row>
            <row>
              <entry>Add Staffs</entry>
              <entry>Open an existing <productname>Denemo</productname>
              file and append the staffs from the (first) movement of it to the staffs in the current movement.</entry>
            </row>
            <row>
              <entry>Add Movements</entry>
              <entry>Open an existing <productname>Denemo</productname>
              file and append the movements from it to the current score.</entry>
            </row>

            <row>
              <entry>Open Recent</entry>

              <entry>Open a file recently edited.</entry>
            </row>

            <row>
              <entry>Open Standard Template</entry>

              <entry>Create score from a stock template.</entry>
            </row>
            <row>
              <entry>Open from Gallery</entry>

              <entry>Create score from an example in the Gallery.</entry>
            </row>

            <row>
              <entry>Open Custom Template</entry>

              <entry>Create score from a template you have saved.</entry>
            </row>

            <row>
              <entry>New Window</entry>

              <entry>Open another instance of
              <productname>Denemo</productname>.</entry>
            </row>


            <row>
              <entry>Open in New</entry>

              <entry>Open an existing <productname>Denemo</productname> file
              in a new tab (or "page") so that both can be used at once.</entry>
            </row>

            <row>
              <entry>Save</entry>

              <entry>Save the current file.</entry>
            </row>

            <row>
              <entry>Save As</entry>

              <entry>Save the current file with a new name.</entry>
            </row>

            <row>
              <entry>Save Parts</entry>

              <entry>Saves a set of parts (staves) in LilyPond format.</entry>
            </row>

            <row>
              <entry>Export PDF</entry>

              <entry>Run LilyPond on the current file to create a PDF.</entry>
            </row>

            <row>
              <entry>Print</entry>

              <entry>Displays the score in a pdf view, from which it can be printed.</entry>
            </row>
	    <row>
              <entry>Print excerpt</entry>

              <entry>Displays only the selection in image viewer, from which it can be saved.</entry>
            </row>

	    <row>
              <entry>Print Current Part</entry>

              <entry>Displays one part taken from the score in a pdf view, from which it can be printed.</entry>
            </row>
            <row>
              <entry>Score Wizard</entry>

              <entry>Open a<guilabel> Score Setup Wizard.</guilabel></entry>
            </row>

            <row>
              <entry>Close</entry>

              <entry>Close the current score but keep other
              <productname>Denemo</productname> scores open.</entry>
            </row>

            <row>
              <entry>Quit</entry>

              <entry>Close the current scores and exit
              <productname>Denemo</productname>.</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect2>

    <sect2>
      <title>Edit</title>

      <para>Use the <guimenu>Edit</guimenu> menu to access common editing
      commands.</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Undo</entry>

              <entry>Undo the pitch and rhythm just added.</entry>
            </row>

            <row>
              <entry>Redo</entry>

              <entry>Redo the pitch and rhythm just added.</entry>
            </row>

            <row>
              <entry>Select</entry>

              <entry>Menu items for selecting music in the score.</entry>
            </row>


            <row>
              <entry>Cut</entry>

              <entry>Copy the selected notation to the clipboard and delete
              the selection.</entry>
            </row>

            <row>
              <entry>Copy</entry>

              <entry>Copy the selected notation to the clipboard.</entry>
            </row>

            <row>
              <entry>Paste</entry>

              <entry>Paste the copied notation at the cursor point.</entry>
            </row>

            <row>
              <entry>Score Properties</entry>

              <entry>Add header information for titles etc. for score and header information for the current movement.</entry>
            </row>

            <row>
              <entry>Preferences</entry>

              <entry>Set external programs (LilyPond, PDF viewer etc.), autosave interval etc. These values will bre remembered when you re-start the program</entry>
            </row>

            <row>
              <entry>Customize Commands, Shortcuts...</entry>
 
            </row>
            <row>
              <entry>Quick settings checkbox
</entry> <entry>One touch setting of keyboad shortcuts</entry>
            </row>
            <row>

	      <entry>Save Command Set.</entry> <entry> Save your current customization of the menu commands and shortcuts.</entry>
            </row>
            <row>
	      <entry>Manage Command Set.</entry> <entry> Hide/Delete/Show menu items, set keyboard shortcuts, set cursor shapes, load/save all these.</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect2>

    <sect2>
      <title>View</title>

      <para>Use the <guimenu>View</guimenu> menu to toggle toolbars and
      palettes used with the mouse.</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Rhythms and Overlays</entry>

              <entry>Allows custom rhythm patterns. Enter rhythms by setting up patterns and then overlay the rhythms with pitches via MIDI or microphone</entry>
            </row>

            <row>
              <entry>Note and Rest Entry</entry>

              <entry>Notes and rests buttons – the highlighted button is current duration – click a button to enter a note/rest, or to edit the note under the cursor in edit mode</entry>
            </row>

            <row>
              <entry>Articulation Palette</entry>

              <entry>A (limited) palette of expression marks etc to apply to notes. More are in the menu system under Markings.</entry>
            </row>

           
            <row>
              <entry>Menu of Objects</entry>

              <entry>Menu of all the Denemo commands listed under type of object</entry>
            </row>


            <row>
              <entry>Show LilyPond</entry>

              <entry>Pops up a window for customizing the LilyPond</entry>
            </row>

            <row>
              <entry>Show Scheme Script</entry>

              <entry>Pops up a window for showing scripts written in scheme to control Denemo</entry>
            </row>

          </tbody>
        </tgroup>
      </informaltable>
    </sect2>



    <sect2>
      <title>Mode</title>

      <para>Use the<guimenu> Mode</guimenu> menu to switch modes or choose to use modelessly. The different modes are useful for different ways or phases of work.</para>
    <para>  With the standard keyboard shortcuts the modes work like this:</para>

        <itemizedlist>


	  <listitem>
	         <para>No Mode. No standard keypresses are defined – you will need to assign keys yourself. You will need to define separate keypresses to insert the notes, change the notes, move the cursor to a note, change the prevailing duration, etc. This mode is for those who want to set up the keys to have single functions. The cursor is green in this mode. This mode gives easy access via the menus for the actions that do not change with modes.
		 </para>
          </listitem>

	  <listitem>
	         <para>Insert Mode. In this mode the keys 0,1,2... select the prevailing duration (whole-note, half-note ...) while the Note name keys A,B,C ... insert a note of that name in the prevailing duration. The octave is the one nearest the cursor. The cursor is green in this mode. This mode is good for entering single line music.
		 </para>
          </listitem>

	  <listitem>
	         <para>Edit Mode. In this mode the keys 0,1,2... insert a note (whole-note, half-note ...) at the current cursor position, while the Note name keys A,B,C ... change the note at the cursor to A,B,C.... The cursor is purple. This mode is good for editing music already entered and for entering pure rhythms (all notes on the same pitch, for overlaying pitches via microphone input later). You can also enter music in this mode - you type the duration key (which inserts a note) and then the Note name key, which edits it to the one you want.
		 </para>
          </listitem>

	  <listitem>
	         <para>Classic Mode. In this mode the keys 0,1,2... insert a note (whole-note, half-note ...) at the cursor position, while the Note name keys A,B,C ... move the cursor. The cursor is green. This mode is good for entering music with chords (Enter is the standard keybinding for this).
		 </para>
          </listitem>
       	  <listitem>
	         <para> Entry types: Note, Rest, Non-Printing Rests, Rhythm. These are used with the above modes to control what is entered. The unusual one here is Rhythm entry, which gives audio feedback when entering pure rhythms, enabling you to enter rhythms without looking at the screen to check that you have entered the correct duration. Non-Printing rests allows you to make a part vanish and return when writing several parts to a staff.
		 </para>
          </listitem>
       
       </itemizedlist>

      

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>No Mode</entry>

              <entry>Switch Note/Rest menu to actions that are the same regardless of mode.</entry>
            </row>
            <row>
              <entry>Insert</entry>

              <entry>Switch to insert mode.</entry>
            </row>
            <row>
              <entry>Edit</entry>

              <entry>Switch to Edit mode.</entry>
            </row>

            <row>
              <entry>Classic</entry>

              <entry>Switch to the original denemo mode.</entry>
            </row>

            <row>
              <entry>Note</entry>

              <entry>Switch to entering notes.</entry>
            </row>

            <row>
              <entry>Non Printing Rests</entry>

              <entry>Switch to entering rests which just occupy space and time but will not appear in the score.</entry>
            </row>


            <row>
              <entry>Rest</entry>

              <entry>Switch to entering rests.</entry>
            </row>
           <row>
              <entry>Rhythm</entry>

              <entry>Switch to mode for Rhythm entry via keyboard (pitch entry via Audio or MIDI). Each duration has its own audio feedback.</entry>
            </row>

            <row>
              <entry>Toggle Edit</entry>

              <entry>Toggle between current mode and Edit mode.</entry>
            </row>

            <row>
              <entry>Toggle Rest</entry>

              <entry>Toggle between entering notes and entering rests.</entry>
            </row>

            <row>
              <entry>Toggle Rhythm</entry>

              <entry>Toggle between Note and Rhythm entry.</entry>
            </row>

          </tbody>
        </tgroup>
      </informaltable>
    </sect2>

     <sect2>
      <title>Input</title>
       <para>Choose whether to use external sources (Audio from the Mic input or MIDI) for Denemo. To use these you may need to review the settings in Edit->Prefs first.</para>
   </sect2>
  
    <sect2>
      <title>More</title>
       <para>Add commands to Denemo. Extra commands are available (those which not everyone will want) via this menu. More Commands gives commands shipped with Denemo, while My Commands gives ones that you have created locally. Note that the extra commands can also be loaded at the menu where you are looking for them (you right-click on a menu item, and if there are more commands for that menu the More Commands for this Menu item will show),</para>
   </sect2>

    
   
    <sect2>
      <title>Playback</title>

      <para>Use the Playback menu to start playback of your score. Denemo lets
      you hear your score, using an external MIDI player, or Csound.</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Play</entry>

              <entry>Plays the selected measures or starting from the current measure</entry>
            </row>
           <row>
              <entry>Stop</entry>

              <entry>Stops the playback</entry>
            </row>

            <row>
              <entry>Play Using Csound</entry>

              <entry>Play this score (Csound) using .orc file specified in
              <guisubmenu>Playback Properties</guisubmenu>.</entry>
            </row>

            <row>
              <entry>Playback Properties</entry>

              <entry>Set playback tempo, select an .orc file for Csound
              playback</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect2>

    <sect2>
      <title>Help</title>

      <para>Use the Help menu to get help using Denemo.</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Help</entry>

              <entry>Launch a browser to view this manual.</entry>
            </row>

            <row>
              <entry>About</entry>

              <entry>View Denemo version information.</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </sect2>
   </sect1>

    <sect1>
      <title>Toolbar</title>

      <para>Use the Toolbar to access common Denemo commands quickly. The Tool
      Bar contains the following icons:</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Icon</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
	    <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/new.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Creates a new document.</entry>
            </row>
	    <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/scorewizard.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Creates a new document using the score wizard.</entry>
            </row>
	    
	    <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/open.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Opens the Open File dialog box.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/save.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Saves the current file</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/print.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Runs LilyPond to convert the current file to PDF and
              sends it to the printer for printing</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/undo.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Undoes the last action. (Currently Undo only works for
              adding notes)</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/redo.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Redoes the previous undo action. (Currently Redo only
              works for adding notes).</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/cut.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Cuts the current selection to the clipboard.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/copy.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Copies the selected notation to the clipboard.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/paste.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Pastes the current clipboard item at the cursor
              position.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/gotobegin.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Jumps to the first measure of the movement.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/gotoend.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Jumps to the last measure of the movement.</entry>
            </row>

            <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/playmidi.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Plays the current piece using MIDI</entry>
            </row>
           <row>
              <entry><mediaobject>
                  <imageobject>
                    <imagedata fileref="images/stopmidi.png" />
                  </imageobject>
                </mediaobject></entry>

              <entry>Stops the MIDI playback</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
  </sect1>
  <sect1>

      <title>Object Menu</title>

      <para>The object menus give you actions (such as insert, delete ...) ordered by the objects (notes, staffs, measures ...) that they act on.</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry>Menu Item</entry>

              <entry>Description</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>Score</entry>
              <entry>Settings that apply to the whole score.</entry>
            </row>
            <row>
              <entry>Movements</entry>
              <entry>Insert/remove navigate, change the properties of movements.</entry>
            </row>
            <row>
              <entry>Staffs/Voices</entry>
              <entry>Insert/remove, navigate, swap, change the properties of staffs or voices</entry>
            </row>
            <row>
              <entry>Measures</entry>
              <entry>Insert/remove navigate measures .</entry>
            </row>           
            <row>
              <entry>Notes/Rests</entry>

              <entry>The first menu item in this menu depends on which mode you have chosen. For example in Classic mode there is a function to move the cursor to a new note while in Insert mode the function inserts a note of the given name. These menu items are present mainly to allow you to set shortcuts – it would be too slow to use them for actually entering notes/rests. I addition there are menu items for inserting rests, deleting, tied notes, setting the notehead style and stem direction, grace notes, triplets, transposing and more </entry>
            </row>
            <row>
              <entry>Chords</entry>
              <entry>Insert/remove notes from a chord.</entry>
            </row>
            <row>
              <entry>Clefs</entry>
              <entry>Insert change or set the initial clef.</entry>
            </row>
            <row>
              <entry>Keys</entry>
              <entry>Insert a change or set the initial key.</entry>
            </row>
            <row>
              <entry>Time Signatures</entry>
              <entry>Insert a change or set the initial time signature.</entry>
            </row>
            <row>
              <entry>Markings</entry>
              <entry>Insert/remove tempo indications, dynamics, slurs, trills etc.</entry>
            </row>

            
           

            <row>
              <entry>Cursor</entry>
              <entry>Navigation of the (Denemo) cursor.</entry>
            </row>
            <row>
              <entry>Bookmarks</entry>
              <entry>Create/delete or move to bookmarked positions in the current movement.</entry>
            </row>
            <row>
              <entry>Other</entry>
              <entry>Enter lyrics, chord symbols, figured basses or LilyPond directives. Clear overlays.</entry>
            </row>

          </tbody>
        </tgroup>
      </informaltable>

  <sect2>
    <title>Score</title>

    <para>
    In the score properties dialog things that affect the whole piece can be set, as well as the titles of the current movement. In the score properties dialog you can include directives to apply to all the movements.
    </para>

         <note>
            <para>When a file is loaded it opens with the final movement set as the current movement.</para>
          </note>
  </sect2>

  <sect2>
    <title>Movements</title>

    <para>
    Your score may contain several movements, which you can move between, insert and delete with the Movements menu.
 </para>
    <para>
    The titles of the current movement can be set. These titles should be left blank for movements after the first if they apply to the whole score (a LilyPond peculiarity). In the movement properties dialog you can set a LilyPond directive to cause a page break before the movement (see LilyPond docs, but briefly #f is no page break and #t (true) is page break). You can include any other directives here to apply to the movement as a whole.
    </para>
  </sect2>
  <sect2 revision="0.75">
    <title>Adding Markings</title>

    <para>Dynamics, Slurs, Trills, Tempo Indications, and much more a found in the Markings menu </para>
    <para>You can collect together your favorite ones, either by assigning shortcuts, or creating a menu of favorite commands which just invoke the action you use. </para>
   
    <procedure> 
      <title>Adding Markings using the Articulation palette</title>
       <para>Some ornaments and articulations have been collected together as a palette. </para>
      
      <example id="expressions_palette">
        <title></title>

        <mediaobject>
          <imageobject>
            <imagedata fileref="images/expressions_palette.png" />
          </imageobject>
        </mediaobject>
      </example>

     
  </procedure> 
 
  </sect2>

  </sect1>


 <sect1>
    <title>Rhythms and Overlays</title>
    <para>The Rhythms and Overlays toolbar lets you enter music following a rhythmic pattern. If you have a pattern in your music that appears many times you only need to type it once. By selecting it and clicking Create Pattern you install that pattern on the toolbar. Then as you enter notes (in Insert Mode) the notes follow the rhythmic pattern chosen. Pressing a duration key goes back to adding notes of the prevailing duration. You can have several custom patterns like this and switch between them using the space bar (or other keybinding of your choice). Another (more musical) way of entering rhythms is to "drum" them in using the keys on the computer keyboard for quarter-note, eighth-note etc, a curious sort of "musical instrument" where you change key for different durations. Use the numeric keypad for this. Drumming in is quickly learnt and, by playing in the notes rhythmically you can keep your place in the music. Use the mode->Rhythm Mode option for this, so that you get a bell to confirm when you have completed a measure.</para>
 <para>Using Input->Midi or Audio allows you to enter pitches directly. If you have entered your piece of music as pure rhythm you can overlay with the pitches using a MIDI controller or musical instrument with mic, headphones out or pickup attached to your soundcard.
</para>

  </sect1>
  <sect1>
    <title>Playing Notes into Denemo - MIDI</title>

<para>
    Denemo can take pitches directly from MID input. Select Input->Midi Input. The control window allows you to choose the enharmonic range. Under Mode->MIDI are various "MIDI filters" that allow you to control how the MIDI input is used: with none active the behaviour is as if you had entered the notes using the pc-keyboard (except that octave, accidental and note name are all entered in one go). You can also use Advance on Edit to put the pitches onto pre-entered rhythms, or Check Pitches (where you play through the piece and a warning is issued if you hit a wrong note).
</para>
<para>
   These MIDI filters are scheme scripts, so they can be tailored to do whatever you wish. One example is a filter that enables you to enter Figured Bass figures by playing the notes corresponding to the figures while holding down the bass note. Chords could be entered using similar code.
</para>
  </sect1>
  <sect1>
    <title>Playing Notes into Denemo - Audio (Souncard Mic Input)</title>

<para>
Denemo can listen for, and detect the pitch of notes on the mic input of the computer; it doesn't attempt to guess the rhythm - such systems do not work well - but you will find that playing the notes in time will help you to play them in, as well as make playing them in a musical experience rather than a chore.
</para>

 <para>Playing the notes in can be much quicker than using the keyboard since the note octave and accidental are all given just by playing the note. If you are able to play a musical instrument then this will probably be much faster for you than typing note names, octave shifts and accidentals at the computer keyboard. Using the headphones out of an electronic keyboard avoids "noises-off" interfering with the pitch detection. Many microphones and pickups benefit from some pre-amplification - it is worth getting the level right before you begin.</para>

<para>When you select the Input->Audio on the Main Menu the Pitch Recognition window pops up. While the mouse pointer is inside the score drawing area the score is sensitive to pitches heard via the microphone input. The background colour of the score changes to show that the notes will be entered into the score. </para>
<para>There are two ways of using the pitch entry - Overlay mode (default) and Insert mode. The button marked Insert causes notes to be entered into the current measure in the prevailing rhythm - the mode is set to Insert for this. The button marked Overlays overlays the notes already present with the pitches you sound. There is a third button, marked Tuning, which is a state-of-the art musical instrument tuner.</para>
<para>
Music is entered into the measure which holds the cursor. If you are overlaying a rhythm already entered, then the first un-overlayed note in the measure is overlayed by the note detected. You can delete the overlay using the regular delete keys, or clear them altogether if you want to start over in a measure. If you are in Insert mode then the notes detected will be inserted at the cursor position.
</para>
<para>Use the enharmonic shift to select whether Bb or A# should be entered when you enter the given pitch - you can usefully go as far as B# and Fb.</para>
<para>Use the transpose control to shift up or down by octaves.</para>
 <para>Most of the other settings would require study of the Aubio documentation to understand, but the one marked threshold may be useful to make the detection less sensitive to ambient noises if using a microphone with an acoustic instrument.</para>
<para> The best set-up is to plug the headphones-out socket of an electronic keyboard into the mic input, and choose a piano setting on the electronic keyboard.</para>
<para> If you don't have any musical instrument that you can plug directly into the mic in, then you can use an acoustic instrument with a microphone, in which case move your microphone closer or further from your instrument to get reliable detection. Too close and you get double detections, too far and you get missed ones. To check for good detection open a piece of music, set Overlay mode and put the cursor in the first measure and play the piece in – the notes should all turn blue if you have perfect detection. It is worth while getting perfect detection – more than one or two miss-detects per piece of music and you may want to use the Insert rather than the Overlay method.</para>
  </sect1>

  <sect1>
    <title>Understanding Modes</title>

    <para>Modes in Denemo are optional. Denemo has a large number of actions (functions) that it can execute for you, and these are to be found in the View-\>Objects Menu (grouped by objects such as note, measure, clef etc. Some of these functions do different things in different modes. For example the key A is usually bound to a function that moves the cursor to the nearest note A, or inserts a note A, or changes the current note to an A, all depending on which mode is chosen. (There are also entry modes, in rest entry mode instead of a note a rest would be inserted). </para>
 <para>If you dislike modal programs, you will set your shortcuts to the non-modal functions (these are found in the View-\>Objects Menu when Mode-\>No Mode is selected, or in the View-\>Actions Menu.)</para>
<para>
When using a MIDI controller to enter pitches, you can just set the Rhythm entry mode, and never have to switch modes. You select rhythms via the keyboard and edit their pitch with the MIDI in.
</para>
<para>In addition to the basic Insert and Edit modes there are four entry modes for specialized use. Rest entry is useful for entering a large number of rests. (For single rests it is easier to use a keypress - e.g. Alt-3 for an eighth note). Non-printing rests are used for parts which enter during the course of a measure. Note entry is the default, while in Rhythm entry the different durations have varied audio feedback and a beep is sounded when Denemo moves to the next measure – this is to help when entering the rhythm of a piece for later overlaying with pitches.</para>
  </sect1>

  <sect1>
      <title>Basic Use</title>
    <sect2>


      <subtitle>Introduction</subtitle>
      <para>
      Denemo allows you to explore all the actions  (insert/delete/edit/navigate...) using the Objects menu. So inserting notes can be found under Notes/Rests while inserting a Staff comes under Staffs/Voices.
<note> When you have found the action you need you can right click on the menu item to get an explanation of the action and to view/set a key press- a keyboard shortcut - to activate the action. If you are setting a lot of keyboard shortcuts for menu items you can check the Edit->Keyboard Setup->Allow Quick Shortcut Edits button, whereupon you can set the keyboard shortcut just by pressing the desired key while the menu item is selected. In addition you can customize the mouse actions to initiate commands, and set the cursor that will show while certain mouse conditions apply.
</note>
      </para>
      <para>Denemo offers several ways of entering music: typing at the keyboard, playing in via a MIDI keyboard (controller), playing in acoustically using a microphone or choosing items from the menu system. </para>
      <para>Using the menus for everything would be very slow, but next to each menu item is the keypress that you can use instead. If there is no keypress shown, and you want to use that item often, then right click on the menu item and you can set a key combination for that menu action. Right clicking is also useful for getting a description of what the menu action is. </para>
      <para> Typing at the keyboard can be very fast, if you forget which keypress you need you can consult the menu system to find out. This method is good for touch typists.
      </para>

      <para role="persom">For entering a lot of already written-out music, playing the music in via a MIDI keyboard or microphone can offer the fastest and most musical method. </para>
      <para>One way to do this is to choose Rhythm entry mode and enter the music as pure rhythm, ignoring the note names. Each duration sounds its own pitch and length as you enter the durations. As you start each measure the bell will sound so that you can keep your eyes on the score you are copying without needing to look up and check that you haven't miss-typed. If you are a reading musician you will find that you tap in the rhythm rhythmically which helps to keep your place in the piece you are entering. </para>
      <para>Once you have entered the rhythms you choose an external source from the Input menu, placing the cursor in the first measure, play the notes via MIDI or a microphone plugged into the mic input of your soundcard. The Audio Input button introduces a special entry mode where the pitches you play in will overlay the rhythm, appearing as blue notes. You can delete any wrong pitches using the usual delete keys, without deleting the rhythm. In fact if you have an "interloper" (an extra spurious note) you can delete it and the other pitches will all move along to their correct places.</para>



      <para>Another method of playing music in acoustically doesn't involve entering the rhythm separately. For this select Input->Audio and then choose Insert instead of Overlays on the Pitch Recognition Panel that pops up. With Insert the sounded notes are entered as in the prevailing rhythm. The same applies if you have MIDI, only you just need to select Insert mode to enter the notes in that case. So by choosing a rhythm (e.g. half-note, quarter-note, or a custom rhythm pattern) and playing in the pitches you can enter the music into a blank score.</para>
      <para> For MIDI input there are special modes (MIDI filters), such as Advance On Edit, which means you can simply play the pitches in and they are applied to the notes. If you are entering notes and durations at the same time using MIDI then the "AngryDelete" finger can be useful. With this filter on notes are entered normally until, but if you make a mistake and press the wrong note just hit the next one much louder and it will make the correction for you! MIDI filters are found under Mode-&gt;MIDI</para>
      <para>The oldest Denemo keymaps are no longer supported. (see <xref linkend="customizingDenemo" />). (Input via
      MIDI keyboard and Mic in is now available). Denemo also
      provides shortcuts for use with Numeric Keypad.</para>

      <sect3 id="scoresetup">
        <title>Score Setup</title>

	<para>Denemo provides different ways to set up scores: <itemizedlist>
            <listitem>
              <para>Create an init.denemo  score with everything you want to start up with, and any actions you want to be taken before you begin.<xref linkend="initDotDenemo" /></para>
            </listitem>

            <listitem>
              <para>Use a Template</para>
            </listitem>

            <listitem>
              <para>Use shortcut keys to add staves and set attributes</para>
            </listitem>

            <listitem>
              <para>Use the Setup Wizard</para>
            </listitem>

            <listitem>
              <para>Use Menus</para>
            </listitem>
 </itemizedlist></para>
        <sect4>
          <title>Using Templates to Setup Scores</title>

          <para>Denemo comes with a few preinstalled templates.
          You can also design your own templates as well.</para>

          <procedure>
            <step>
              <para>Navigate to <guimenu>File</guimenu>, <guisubmenu>New From
              Template</guisubmenu>, The <interface>Open</interface> dialog
              box appears.</para>
            </step>

            <step>
              <para>Double click on a template name from the list of
              templates. The dialog box closes and the template appears.
	      <!-- Alternately type @NewfromTemplate@, the <guisubmenu>New From
              Template </guisubmenu> dialog box appears. Double click on a
              template name from the list of templates. The dialog box closes
	      and the template appears. 
	      -->
            </para>

            </step>
          </procedure>

          <note>
            <para>Adjust the clef, key and time signatures as needed.</para>
          </note>
        </sect4>

        <sect4>
          <title>Using Shortcuts to Setup Scores</title>

          <para>Inserting attributes with shortcut keys is an effective way to
          quickly customize a template.</para>

          <procedure>
            <step>
              <para>Navigate to the Staff you want to change an attribute
              using one of these shortcuts:<itemizedlist>
                  <listitem>
			  <!--  <para>Type @StaffDown@ to move down one staff</para> -->
			  <para>Select Staffs/Voices-\>StaffDown to move down one staff</para>
                  </listitem>

                  <listitem>
			  <!-- <para>Type @StaffUp@ to move up one staff</para> -->
			  <para>Select Staffs/Voices-\>StaffUp to move up one staff</para>
                  </listitem>
                </itemizedlist></para>
            </step>
          </procedure>
        </sect4>

        <sect4>
          <title>Using Templates to Setup Scores</title>

          <para>Denemo Comes with a wide range of prebuilt templates for
          standard vocal and instrumental scores. If you have a custom score
          setup you use over and over create a score layout using the Setup
          Wizard and save it as a template.</para>

          <procedure>
            <step>
		    <para>Click on File-\>New From Template, The <interfacename>
              Open</interfacename> Dialog box appears displaying the currently
              available Templates.</para>
            </step>

            <step>
              <para>Double click on the template name in the righthand pane.
              The template loads in the Main Denemo Window.<note>
                  <para>The currently active staff will be black. All other
                  staves will be yellow, until they are active.</para>
                </note></para>
            </step>
          </procedure>
        </sect4>
 </sect3>
 </sect2>
  </sect1>

    <sect1 id="customizingDenemo">
      <title>Adding Key/Mouse Shortcuts</title>

      <para><productname>Denemo</productname> allows you to choose which keys activate which commands. It also allows you to choose Mouse press/release gestures (in combination with keys such as Shift, NumLock, CapsLock etc).
 <para>
 To choose a shortcut for a menu item, right-click on the item and choose the Create Mouse Shortcut, or the Edit Shortcuts option. The Set Mouse Shortcut Dialog requires you to set which button and action you want to use and then to hold/lock the keyboard modifier while clicking on the big button. The setting you have chosen is shown, and you click ok to accept it.
 </para>
 <para>
 To set a keyboard shortcut, and to delete any sort of shortcut, use the Edit Shortcuts menu item. This dialog also allows you to choose a cursor to show while certain mouse actions are underway.
 </para>
 <para>
If your choice of keyboard shortcut already belongs to another command, you are warned about this, and given the chance to change your mind or steal the shortcut. Also, you can choose whether to distinguish between keypresses with, say the NumLock down and those without or to ignore it. If the NumLock is set but no command for that key specifically requires it then the setting of NumLock is ignored and the keypress is treated as if the NumLock was off.
 </para>
 The menu item that activates the command shows the shortcuts that exist in bright blue lettering. PrsL-CapsLoc, for example, is the Press action on the Left mouse key while the CapsLock light is on.  In the default command set this is linked to the BeginSlur command, so that together with the RlsL-CapsLoc for the release of the left mouse button, you can "draw" slurs by using the mouse. Similarly, Shift with left mouse button (MveL-Shift) is set to allow you to drag notes up and down the staff. (This is using Command MoveNoteToCursor, which is found under Notes/Rests/Edit/Edit Note/To Cursor)</para>
    </sect1>



 <sect1>
    <title>More Commands</title>
<sect2>
     <title>Adding More Features </title>
   <para>
It is possible to add more commands to the set that Denemo ships with. Some of these are shipped with Denemo, but not added automatically so as to keep the menu sizes manageable. Generally, you right-click to find more menu items to add; once added you can set a keyboard/mouse shortcut and keep the command in your default setup.
  </para>
</sect2>
<sect2>
     <title>Adding Your Own Features </title>
   <para>
You can also get Denemo to remember a frequently used sequence of actions - it can be installed in the menu system and given a keyboard shortcut just like any other command. </para>
  <para> To do this you right-click and choose Show Scheme Script. (You do not have to understand what a Scheme Script is to use this!). In the little window that pops up set Record Scheme Script and then do the set of steps you wish Denemo to remember, <emphasis>using the menu items, not keyboard, for each step</emphasis>.
  </para> 
 <para>As a simple example, suppose you wanted a command to delete the next note (there are commands to delete the previous note and the current note, so why not?). You would enter some notes, put on Record Scheme Script and then from the menu Cursor select Cursor Right (to move on to the note to be deleted), and with the Notes/Rests->Delete->Delete Object menu item you would delete the note. (Each time you use a menu item you will see a new command entered into the Scheme window). Now turn off Record Scheme Script and you can experiment with your new command by pressing Execute in the Scheme Script window. To save this new command for future use, you right click on a menu item (in the menu where you would like the command to appear) and choose "Save Script as New Menu Item", this will ask you to make up a name for your new command as well as a label for the menu item etc.

 </para>  <para> You can save the command in your default sequence of commands (via Edit->Customize Commands...->Manage Command Set->Save as Default Command Set). If not you will be asked if you want to save your new commands when you exit. Otherwise you can re-load via the More->My Commands menu item.</para> 
</sect2>
<sect2>
 <title>Writing Scheme Scripts </title>
 <para>
 If you are a programmer you will have guessed that you can edit the Scheme Script window to create any command you want. Even if you are not familiar with Scheme you may find that you can adapt other scripts to do what you want.
 </para> 
 <para>
 A good example of this is a script to insert a particular LilyPond directive into the score. This is all that many scripts do: it is easy to see the piece of LilyPond in the Scheme Script window, and by changing it you can create a new command.
 </para> 
 <para>
 For example, from the More menu select the command /menus/ObjectMenu/Instruments/Orchestral/RehearsalMark (the files are laid out in folders/directories in the same way as the menu system itself). Then choose Get Script from the right click menu. With this command its script is appended to the Scheme Script window. Here you can see the part that says
<itemizedlist>
 <listitem>
(d-InsertLilyDirective " \\mark \\default")
</listitem>
</itemizedlist>
which is inserting the LilyPond directive "\mark \default" which inserts the default rehearsal mark. (The extra \s are needed to tell Scheme that you literally mean a \ sign). You can change this to insert any other LilyPond that you need - always doubling the \ signs. The you can save as a new menu item, or if use Save Script to customize the script you started with.
 </para>
 
 <para> 
 More ambitious programmers will need to know all the commands available. Besides the complete Denemo command set (the list is given in the Command Management window) there are the following additional Scheme procedures defined.
 </para>
</sect2>
<itemizedlist>
<listitem>d-GetType returns a scheme string indicating the type of the current object
</listitem>
<listitem>d-GetNoteName returns  a scheme string, giving the note name a-g of the current note
</listitem>
<listitem>d-GetNote returns  a scheme string, the note name, accidental and octave of the current note (LilyPond notation)
</listitem>
<listitem>d-GetNotes returns  a scheme string, the notes of a chord separated by NULL characters
</listitem>
<listitem>d-PutNoteName takes a string argument, a note in LilyPond notation. Changes the note at the cursor. Not for use with multi-note chords.
</listitem>
<listitem>d-DiatonicShift Deprecated.
</listitem>


<listitem>d-NextObject moves cursor to next object, returning TRUE if current object has changed
</listitem>
<listitem>d-NextChord as next object, but skipping non-chord objects.
</listitem>
<listitem>d-NextNote Deprecated
</listitem>


<listitem>d-WarningDialog Pass a string argument to pop up a warning.
</listitem>


<listitem>d-GetChar returns a string representing a keypress from the user (blocks waiting for a keypress)
</listitem>
<listitem>d-GetCommand returns a string containing the command name for the user's keypress (blocks waiting for a keypress)
</listitem>
<listitem>d-GetUserInput takes three strings, displays and returns the user's response as a string.
</listitem>
<listitem>
d-GetMidi
</listitem>
  <listitem>
d-PutMidi
</listitem>
  <listitem>
d-PlayMidiKey
</listitem>
  <listitem>
d-BassFigure
  </listitem>
  <listitem>
d-GetNoteAsMidi  
  </listitem>
  <listitem>
d-RefreshDisplay
  </listitem>
  <listitem>
d-InputFilterNames  sets the status bar
  </listitem>

  <listitem>
d-NoteDirectiveGet* where * is one of Display, Prefix, Postfix, takes a tag and returns the value or #f if no tagged directive found on the note at  the cursor.
  </listitem>
  <listitem>
d-ChordDirectiveGet* as above but for the Chord as a whole
  </listitem>

  <listitem>
d-DirectivePut-note-* where * is one of display, prefix, postfix, takes a tag and value, changes or creates a directive on the note at the cursor, with that tag and value. Returns #t if successful.
  </listitem>
  <listitem>
d-DirectivePut-chord* as above but for the Chord as a whole
  </listitem>

  <listitem>
d-Chordize Ensure that even a single note is treated as a chord - needed for some LilyPond constructs (e.g. fingerings)
  </listitem>

</itemizedlist>

  <para>
  Standard Denemo commands that pop up dialogs will work as usual if no argument is passed to them from Scheme. In general if a string consisting of strings of the form "name=value\0" is passed these will be used and no popup will occur. The field "name" will be given the value "value". The \0 is a NULL character that separates the assignment strings. As a shorthand if there is only one value being passed you can just pass the value. The names of the fields depend on the action being called. So for example
<example id="schemecalls">
(d-InsertLilyDirective "directive=^\\markup \\italic {Allegro}\0display=Allegro")
</example>
will insert a LilyPond directive whose text is ^\markup \italic {Allegro} while displaying the word Allegro in Denemo. If you only wanted to pass the directive then
<example id="schemecalls">
(d-InsertLilyDirective "^\\markup \\italic {Allegro}")
</example>
would do this. The fields are by convention lower case names, they are listed against the commands below.
  </para>
  <para>
This feature is being rolled out, and currently works for
<itemizedlist>
<listitem>
d-InsertLilyDirective (directive, display. minpixels)
</listitem>
<listitem>
d-AttachLilyToChord (prefix, postfix, display) deprecated see d-ChordDirectiveGet* and Put* below
</listitem>
<listitem>
d-AttachLilyToNote (prefix, postfix, display) deprecated see d-NoteDirectiveGet* and Put* below
</listitem>
<listitem>
d-StaffProperties   understands a couple of property=value settings
</listitem>
<listitem>
d-InitialClef
</listitem>
<listitem>
d-InsertClef
</listitem>
<listitem>
d-InitialKey 
</listitem>
<listitem>
d-InsertKey
</listitem>
<listitem>
d-Open filename
</listitem>
<listitem>
d-ScoreProperties (lilypond= lilypond to be applied to each score block in LilyPond, fontsize= size of font to be used for score)
</listitem>


</itemizedlist>
  </para>
  </sect1>

 <sect1>
    <title>LilyPond Editing</title>
<sect2>
     <title>Introduction</title>
 
   <para>
From version 0.7.8 we have the ability to edit the LilyPond output within Denemo. This approach immediately makes Denemo able to do many more things (e.g. multiple verses for songs) with the music still editable from within Denemo. The gallery of examples and the standard templates contain examples which you can use.
  </para>
   <para>
These can be used without knowing the LilyPond language (provided a suitable template or example file exists). Alternatively, with a general idea of how a LilyPond file works tweaks from the LilyPond documentation can be inserted into the LilyPond output and stored with the Denemo, leaving open the possibility of further editing of the notes within Denemo without the need to re-apply tweaks or keep separate LilyPond files.
  </para>
</sect2>
<sect2>
     <title>Using the LilyPond Window</title>
    <para>
Under the View menu is a Show LilyPond item which pops up a window with the LilyPond output in it. The text is interspersed with buttons which enable you to hide or show the various sections or to create custom versions. The text in bold can be altered and the alterations are kept in the Denemo file.
 </para>

    <para>
The two windows are kept in sync, so you can move back and forth between editing textually and editing in Denemo.
   </para>
   <para>
Right clicking on the text gives a menu for actions on the LilyPond text. There is one for moving the cursor to the LilyPond text for the current Denemo object. Moving the cursor in the text window with the arrow keys causes the Denemo window cursor to move in synchronism.
  </para>
   <para>
This menu also includes a Print command that operates on the visible LilyPond text in the window.  This means you can open specific custom score blocks and print from them, or even make a temporary edit for just one print. If you save the program while a choice of custom scoreblocks is open then these are remembered. So when you reload and hit Print those score blocks will be printed.</para>

</sect2>
<sect2>
     <title>Detail</title>
   <para>
Several custom scoreblocks can be kept, and by making the one(s) desired visible, the same Denemo file can be used to print a variety of things from the same music input. For example, a full score or a set of parts, or several voices on group of staffs or even a piano reduction. The custom scoreblocks can be are named using the comment on the first line (see the template Piano.denemo for an example).
  </para>

   <para>
The various Voices/Staffs for the different Movements are separated by buttons. These are labelled by enumerating the movements and staffs in order, so the first voice in the first movement has the music defined as
"MvmntIVoiceIMusic" and so on. Within these music blocks you can insert arbitrary LilyPond text between notes, (the insertion points are marked by grey blocks)
and the text inserted will appear as a LilyPond directives in the main Denemo window. 
 </para>

   <para>The main Denemo window also moves its cursor to correspond with where you are editing. (It should of course move the cursor immediately you click on a point in the music, but, as yet, it only moves the cursor when you press a key just before the note name - one of the arrow keys will do).
  </para>


 
   <para>
Custom score blocks are created by right-clicking on the Standard score block and selecting create custom score block. You can cut and paste another score block, or start from the text of the standard one. If you print a single part from all movements, you get the standard scoreblock for this and can add it to your custom score block so that a single print command prints, e.g. both a full score and parts. Using the \book {} block you can put these into separate files (stored in the folder .denemo in your home folder).
</para>
  <para>
The music defined by MvmntIVoiceIMusic is then used in the score blocks at the end of the LilyPond window, by the expression \MvmntIVoiceIMusic. This means that the same music can be output in several different ways, so that the same Denemo file can contain custom score blocks to output the music as a Piano Score with several voices or separate parts, for example.
  </para>
  <para>
The definitions for MvmntIVoiceIMusic actually look like this
<itemizedlist>
<listitem>
MvmntIVoiceIProlog = {\MvmntIVoiceITimeSig \MvmntIVoiceIKeySig \MvmntIVoiceIClef}
</listitem>
<listitem>
MvmntIVoiceIMusic = {\MvmntIVoiceIProlog \MvmntIVoiceI}
</listitem>
</itemizedlist>
Where \MvmntIVoiceI is the actual block of notes you have written, while the other definitions hold the time signature, clef etc. By using these, you can print the same music with different clefs, still maintaining the ability to edit the notes in Denemo.
  </para>

   <para>Note that the normal Denemo Print commands are still operate as they do if you never look at the LilyPond window. What happens is that if you select the Print Current Part menu item then this creates a tailored standard scoreblock for that part. However, if you use the File->Print command then it prints the first custom scoreblock that is open (visible) (or the standard scoreblock if you do not have any custom scoreblocks).
  </para>
   <note>
Bugs:
Clicking (as opposed to using the arrow keys) in the LilyPond text does not move the cursor in the Denemo window.
Moving the text cursor in a lyric (etc.) does not move the Denemo cursor, so you cannot easily see where in the music it comes.
Inserting LilyPond text after last note of a movement has to be done in Denemo.
When you delete a LilyPond directive textually you have to move the cursor to start re-inserting it.
LilyPond notes cannot be parsed back in (would be useful for importing music from arbitrary LilyPond files).
LilyPond inserts at notes can only be completely deleted in the Denemo window - inserts are not merged.
   </note>
</sect2>
  </sect1>

 


 <sect1>
<title>Using the Denemo Classic Mode</title>

<sect2 revision="0.75" id="thedriverseat"><para>This section describes how to use the original note entry mode to enter music from the keyboard.</para>
<para>Lets look at <xref linkend="accidentals"></xref>. We see a c major scale and an arpeggio spread over two octaves. Type the letter 'c', the cursor jumps to the nearest c, (if it is in the wrong octave, type a comma [to go down] , or an apostrophe [to go up]) .  We have reached middle c, we could start moving the cursor up note by note using the k key and then down note by note using the k key. A faster method however is to type the letter name of each note and  moves the cursor to the exact pitch. This holds true for the notes of a chord or arpeggio, we jump to the note by typing the note name and adjust the octave with the command and apostrophe. This works if within an octave. <note><para>Often you will want to enter notes that jump a large interval. To speed up note entry in such circumstances help Denemo determine the direction by moving one step in that direction using the left or right keys. If you have entered a note on middle c and want to enter a b one octave higher, hit the k key before entering the note. Another solution to big leaps would be to first type an apostrophe or comma  to get into the intended octave and only then type the note name.</para></note></para></sect2>

<sect2 revision="0.75"><title>Rhythm Entry in Classic Mode</title><para>Now that we have an idea how to move around the staff we are ready to add note values. Note values are entered using the right hand.   shows the rhythm entry keys as <acronym>0,1,2,3,4,5,6  </acronym>. This yields the following: <emphasis>0</emphasis>= a whole note, <emphasis>1</emphasis> = a half note, <emphasis>2</emphasis> = an quarter note,<emphasis>3</emphasis>= a eigth note,<emphasis>4</emphasis> = a 16th note,  <emphasis>5</emphasis> = a 32nd note, and <emphasis>6</emphasis> = a sixty fourth.  
</para>

</sect2>

<sect2 revision="0.70"><title>Accidentals in Classic Mode</title><figure id="accidentals"><title>Accidentals</title><mediaobject><imageobject><imagedata fileref="images/accidentals.png" align="center" scale="70%" ></imagedata></imageobject></mediaobject></figure><para>Accidentals are added using the plus and minus keys on the keyboard. Double sharps and flats are added with additional pluses and  minuses as needed in any particular key signature.</para><para><xref linkend="accidentals"></xref> shows a chromatic scale starting on middle C and ending on middle C. To add accidentals while typing new notes do the following:</para>
<procedure>

  <step><para>Enter a middle C eighth note (type c and then the keybinding of the rhythmic value, if you need to adjust the octave use the command and apostrophe)</para></step>
  <step><para>Enter another middle C eighth note, this time type the plus sign<command> (+)</command> immediately afterwards, a C sharp appears</para></step>
  <step><para>Enter a D eighth note (type d followed by its rhythmic keybinding)</para></step>
  <step><para>Enter a D sharp eighth note (type d and its rhythmic keybinding and then +)</para></step>
  <step><para>Continue adding notes until you have an exact copy of the first two measures of <xref linkend="accidentals"></xref>.</para></step>
  <step><para>To add flats enter the b eighth note in measure 3 then type a dash <command>(-)</command> a b flat appears.</para></step>
  <step><para>Continue adding flats until you have and exact copy of measures three and four.</para></step>



</procedure>
<para>To add accidentals to existing notation do the following:</para>

<procedure>

  <step><para>Navigate to the note you want to alter using the arrow keys (or your custom keybindings). <note><para>You don't have to be on the exact pitch to add an accidental but make sure to be on the note you want to alter.</para></note></para></step>
  <step><para>Type a <command>+</command> to alter the pitch up a half step and a <command>-</command> to alter the pitch down a half step.

  <note><para>This will produce alterations based on the pitch of the original note. So that a f sharp will become a f double sharp and an e flat will become an e.</para></note></para></step>
  
</procedure>

<note><para>For those familiar with LilyPond, Denemo handles accidentals in a more intuitive fashion. LilyPond requires you to explicitly name each note with an accidental even if it is part of the key signature, Denemo only requires an alteration if the accidental is part of the key signature, and it keeps the alteration for the entire measure. </para></note></sect2>

<sect2 revision="0.75" id="chordsenter"><title>Chord Entry in Classic Mode</title><para>To enter a chord choose a pitch and a rhythm for your base note. 
Next move the cursor to the next chord tone using the letter name for each note or the up and down keys, hit enter to add the note. To make chord entry easier there is a key binding also for the left hand (Ctrl t)as well. Type Enter to toggle chord tones on and off. This add tones or converts rests to a chord tones. Shift Enter removes tones and switches them to rests.</para>



<figure id="chords"><title>Chords</title><mediaobject><imageobject><imagedata fileref="images/fig3.png" align="center" scale="70%"></imagedata></imageobject></mediaobject></figure>

<para><xref linkend="chords"></xref> three contains a series of chords. To enter chords:</para> <procedure>

<step><para> Create a new file and save it to a convient location.</para></step>




<step><para> Navigate to the E above middle C.  (type the alphabetical note names or the arrow keys).</para></step>

<step><para>Type an<command> a </command> and <command>1</command>, a half note g appears.</para></step>
<step><para> Move the cursor to the<command> g</command> one line above and type <command>Enter</command>.</para></step> 

</procedure>

<note><para>To alter  chord tones chromatically, type the plus sign to sharpen the note at the cursor by one half-step and the minus sign to flatten the current note by a half step in the same manner you sharpen or flatten any pitch in Denemo</para></note>


<note><para> Entering a chord when you are already at the end of the measure
(the cursor turns red when this happens) may cause your next note
to be added to the beginning of the next measure, or even 
create a next measure if one didn't already exist.</para></note>
</sect2>



    <sect2 revision="0.76">
      <title>Note and Rest Entry Toolbar</title>

      <para>This toolbar can be used to enter notes using the mouse. It also shows what the prevailing duration is, that is what duration of note will be inserted when you press a note name key.</para>
    </sect2>

    <sect2>
      <title>Chord Entry</title>

      <para>The standard keybinding for entering notes in a chord is the Enter (aka Return) key. This enters the note at the cursor position making a chord out of the current note/chord. This works in Edit and Insert mode. In Classic mode it works on preceding note as you are appending notes.</para>
    </sect2>

    <sect2>
      <title></title>

      <para></para>
    </sect2>

    <sect2>
      <title>Inserting LilyPond Directives</title>

      <para><productname>Denemo</productname> allow you to insert LilyPond directives between notes, prefixing and postfixing the individual notes of a chord or the whole chord itself and at the start of each staff in a score and at the start of each score. This means that the score can be tailored to a great extent without ever resorting to editing LilyPond files themselves. (Re-loading from an edited LilyPond file is generally unsuccessful).
</para> 
<para>
To put a LilyPond directive on an individual note of a chord, put the cursor on that note and invoke 
</para> 
<step>
Other-&gt;AttachLilyToNote
</step> 
<para> 
To put a LilyPond directive between chords, place the cursor at the insertion point, and invoke 
<step>
Other-&gt;InsertLilyPond
</step> 
 Such a LilyPond insert can be locked, which means you will be warned if you try to delete it while you are deleting notes.
</para>
<para>
When you have inserted a LilyPond directive a green bar is printed at that point below the staff. In addition if you specify some display text it will be shown. If the LilyPond inserted is text to be printed above staff the notation ^text can be used. Denemo will show this text above the staff. Likewise, _text will cause text to be printed under the staff. If you wish to annotate your music use %text, which Denemo will print, but LilyPond will not (a newline character is automatically inserted for you to ensure this happens). LilyPond attached to chords or notes shows the display text only. The status bar also shows some of the information.
</para>
    </sect2>
  </sect1>



 
<sect1 revision="0.75" id="playing"><title id="xg">Score Playback</title><para></para>
<sect2 revision="0.75" id="midi"><title id="xh">Midi</title><para></para><formalpara><title>Midi playback</title>

		<para>
			Denemo uses external midi player to play back your score. You can choose which program to use as follows. Go to the Playback menu and choosePlayback Properties and Externals tab. In the External Midi Player text box enter the name of your midi player. When you click on the Play item of the toobar the current movement is played starting from the measure with the cursor in it. If there is a selection then the measures containing the selection are played, otherwise play continues until you click stop or the movement ends.

</para>
<para>While playing, the music scrolls automatically so that you can watch and either bookmark or stop the music if you hear something you want to re-visit. You can make corrections to the synchronism by using the measure forwards or backwards keypresses (usually bound to Ctrl right/left arrow). </para>
<para>This automatic scrolling is turned off if you explicitly set the range of measures in the Playback->Playback Properties dialog</para>
</formalpara>


</sect2>

<sect2 revision="0.75" id="csound"><title>Csound</title><para>In addition to permitting midi playback, Denemo permits playback using csound. Denemo will play your file with a .orc file. In the playback properties make sure the command: <command> csound -d -W</command> is set. Next use the navigation box to choose your .orc file. Denemo will soon come with a few demo .orc files which you will find in XXX. The csound module of Denemo is currently under construction. It is not tested for this release.
 </para></sect2>
</sect1>

  <sect1 revision="0.75">
    <title>Publishing</title>

    <para>Creating paper scores with <productname>Denemo</productname> is done via an intermediate PDF file. <productname>Denemo</productname> takes care of this for you, provided you have set the name of a PDF view in the Preferences. Once this is done click on Print Preview, or Print Part, wait for LilyPond to typeset your score the PDF viewer will pop-up, and you can print using the facilities of that program.
<note>
            <para>Denemo is unresponsive while LilyPond is working - be patient!</para>
          </note>
    </para>

 
  </sect1>

  <sect1>
    <title>Advanced Features</title>


  <sect2 revision="0.75" id="editing"><title>Editing</title><para>Denemo has a variety of features to speed editing. To ease correction of notes  us Edit Mode. You can position the cursor on any note in a chord and change its pitch, accidental, octave using the keypresses assigned to the standard actions.
</para>
</sect2>



   <sect2 revision="0.70">
      <title>Musical Score that Do Things!</title>
<para>
By saving a Denemo score with a script defined (in the script window) you can create music lessons, automatic midi player ... the possibilities are (literally) endless. When you open such a score, the script is run - it can take user input and manipulate the score, or do other actions as your fancy takes you.
</para>
<para id="initDotDenemo">
There is a special score init.denemo that is run on startup. By editing this you can startup with whatever template and whatever actions you wish to be performed. If you set it to do something that quits Denemo, you may need to delete the file before using Denemo normally again. Your local init.denemo is stored in the directory .denemo/actions in your home directory.To create it put the script you want in the script window and use SaveAs selecting ~/.denemo/actions/init.denemo as your file to save to.</para>
</sect2>
   <sect2 revision="0.70">
      <title>Piano Staffs, Orchestral Scores etc</title>

      <para>
Piano staffs, and staff groups can be created using the context field of the score->properties dialog. You can set a piano staff within a staff group by setting successively the StartPiano and StartGroup contexts on a single staff, or more generally setting StartPiano, EndPiano on adjacent staffs within a staff group.
<note>
It is possible to set silly combinations – some will not print anything. Check that you have a Start and End staff for each type and that they are not miss-matched.
</note>

</para>
</sect2>
    <sect2 revision="0.70">
      <title>Single Staff Polyphony</title>

      <para></para>

      <para>Denemo permits the use of mutiple staves for part work, as well as
      enabling multiple voices on a single staff. To add voices to the current
      staff do the following:<orderedlist>
          <listitem>
            <para>Go to the measure(s) where you want to add the second
            voice</para>
          </listitem>

          <listitem>
            <para>Use <guimenuitem>Add Voice to Current Staff item</guimenuitem>.Then open the staff properties. This 
            dialog box will appear. <inlinemediaobject>
                <imageobject>
                  <imagedata fileref="images/addvc2currentstaff.png" />
                </imageobject>
              </inlinemediaobject></para>
          </listitem>

          <listitem>
            <para>If this is a different instrument than the other voice, open
            the instrument drop down list and choose the appropriate
            instrument. The default name for this voice should be ok.</para>
          </listitem>

          <listitem>
            <para>Click Ok to close the dialog box.</para>
          </listitem>

          <listitem>
            <para> To switch voices use VoiceDown, VoiceUp under staff menu.
            or using the keyboard shortcuts <note>
                <para>The stem positioning positioning may not look correct in
                the Denemo window, but it will look correct in the printed
                output.</para>
              </note></para>
          </listitem>

          <listitem>
            <para>For every beat your voice is silent you need to add a null
            note, which is achieved with the following sequence of key
            strokes: 1. n puts you in null mode, 2. r toggles a rest 3. then
            type the rest value you need to add, with the appropriate key
            binding.</para>
          </listitem>

          <listitem>
            <para>For the beats that contain notes just enter them as you
            would normally see section x.<note>
                <para>If you choose not to enter rests in null mode the visual
                output will be the same but these notes will be heard during
                midi playback of your score.</para>
              </note></para>
          </listitem>

          <listitem>
            <para>To leave the new voice and return to the previous one
            type</para>
          </listitem>
        </orderedlist>.</para>
    </sect2>


    <sect2>
      <title>Entering Vocal Music</title>

      <para>Choose Other->Enter Lyrics. <note>you must provide a lyric for each note. </note>The Extend Syllable and Center check boxes are not documented, but you can use double hyphen “–“ and double underscore “__” respectively for these (as described in the LilyPond documentation for syllables and extenders). You can also cut and paste lyrics into a specially written lyricmode block in the LilyPond window and use a custom score block to place it under the music. In this way multiple verses are possible.</para>
    </sect2>

    <sect2>
      <title>Entering Figured Bass</title>

      <para>To enter figures choose Other->Insert/Enter figured bass. There are some shortcuts that enable all the work to be done with the numeric keypad. A brief summary is given by right clicking the option. The conventions are described in the LilyPond docs.</para>
    </sect2>
    
    <sect2>
      <title>Entering Chord Symbols</title>

      <para>To enter chord symbols choose Other->Insert/Enter chord symbols. A brief summary is given by right clicking the option. The conventions are described in the LilyPond docs.</para>
    </sect2>


  </sect1>

  <sect1>
    <title><productname>Denemo</productname> Commandline Options</title>

    <para><productname>Denemo</productname> permits the batch conversion of
    .denemo files into .ly files. The syntax is as follows "denemo -s
    denemofilename. This has not been tested for this release.</para>
  </sect1>

</article>
