language: c
env:
  global:
  - secure: "Yw/ZVthSSeTy4URVvxp+nXYdS5PcNUX6gjjYTzzYiw4rHmqYlYRz27ve1DRydCYeqQq3JgZCn5iKR3MJPj12E861SwihrXpataWZz4rhwJTEhzvJp17O0aV3GxNYNoPlYPoawpEniI6kaqKBrZ6HuxVXgPd6+zrxGroFBKaaync="
  matrix:
  - COMPILER=gcc TEST=integration
  - COMPILER=clang TEST=integration
  - COMPILER=gcc TEST=coverage
  - COMPILER=gcc TEST=install
  - COMPILER=gcc TEST=doc
  - TEST=cppcheck
script:
- if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then tools/travis/run-script.sh ; fi
before_install:
- tools/travis/before-install.sh
install:
- tools/travis/install.sh
after_success:
- tools/travis/success.sh
notifications:
  email:
    on_success: never
    on_failure: always
  irc:
    channels:
      - "chat.freenode.net#denemo"
    on_success: always
    on_failure: always

addons:
  coverity_scan:
    project:
      name: "denemo/denemo"
      description: "Free and Open Music Notation Editor"
    notification_email: azmeuk@gmail.com
    build_command_prepend:
    build_command: tools/travis/run-script.sh
    branch_pattern: coverity
