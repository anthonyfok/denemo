<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>ReloadDrumHash</action>
        <scheme>;;;;Prepares a Hash Table from a .denemo file where a user can put his own drum notation. 
;;;;Format: Each drum instrument has its own staff. Two notes in each: First note/value=GM-note, second user-note
;;;;by Nils Gey, 01/2010

(d-NewWindow)
(if (d-OpenMyTemplate) 
(begin
;;Go to first Staff
(let gotoTopStaff ()
	(if  (d-StaffUp)
	(gotoTopStaff)))

(define DrumHash (make-hash-table 50))

(let createDrumHashTable ()
	(d-GoToBeginning)
	(hashq-set! DrumHash (string-&gt;symbol (d-GetLowestNote)) (begin (d-NextNote) (d-GetLowestNote) ))
	(if (and (d-StaffDown) (d-GetLowestNote) )
		(createDrumHashTable))
		)
))

(d-Close)</scheme>
        <label>Reload the "Drum GM to User" map</label>
        <tooltip>Reloads the drum map which is needed for DrumGm2User</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
