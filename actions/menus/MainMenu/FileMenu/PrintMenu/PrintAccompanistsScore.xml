<?xml version="1.0" encoding="UTF-8"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row type="scheme">
        <after>PrintSelection</after>
        <action>PrintAccompanistsScore</action>
        <scheme>;;;PrintAccompanistsScore
(let ((saved (d-GetSaved)) (response (d-GetUserInput "Print Accompanist's Score" "How many staffs to make small?" "1")))
  (if response
      (let ((staffs ""))
	(set! response (string-&gt;number response))
	(let loop ((number 1))
	  (set! staffs (string-append staffs "(d-GoToPosition #f " (number-&gt;string number) " 1 1) (d-TinyStaff)"))
	  (if (&lt; number response)
	      (loop (+ 1 number))))	
	(ForAllMovements staffs)
	(d-TypesetForScript "(d-PrintAccompanistsScore)")
	(d-CreateLayout (string-append "Accompanist with " (number-&gt;string response) " cue part" ))
	(ForAllMovements staffs)
	(d-SetSaved saved))))
</scheme>
        <_label>Print Accompanist's Score</_label>
        <_tooltip>Prints out the score with the topmost staff in tiny size and puts page breaks before each movement.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
