<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <after>PrintPart</after>
        <action>PrintPartWithTitlePage</action>
        <scheme>;;;PrintPartWithTitlePage
(if  (and (d-Directive-scoreheader? "BookTitle") (d-Directive-staff? "InstrumentName"))
  (let ((saved (d-GetSaved))
	(datefield (d-DirectiveGet-scoreheader-display "BookDate"))
	(instrument (d-DirectiveGet-staff-display "InstrumentName")))
    (d-BookDate instrument)
    (d-PrintPart)
    (if datefield
      (d-BookDate datefield)
      (d-DirectiveDelete-scoreheader "BookDate"))
  (d-SetSaved saved))
  (begin
    (d-WarningDialog "No Book Title, see Score-&gt;Titles-&gt;Book Titles")))
  </scheme>
        <label>Print Part with Title Page</label>
        <tooltip>Prints part with part name on title page</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
