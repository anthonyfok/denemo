<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>ToggleTrill</action>
        <scheme>;;;Trill                   
(let ((tag "ToggleTrill"))
		(define (set-option option)
					(case (car option)
							((direction) (cdr option))
							((offsetx) (string-append " ^\\tweak #'X-offset #'" (cdr option)))
							((offsety)  (string-append " ^\\tweak #'Y-offset #'" (cdr option)))))
		
				(if (and (d-Directive-chord? tag) (not ToggleTrill::params))
						(case (GetEditOption)
								((cancel) #f)
								((advanced) (d-DirectiveTextEdit-chord tag))
								((delete) (d-DirectiveDelete-chord tag))
								(else #f))
						(if ToggleTrill::params
							(begin 
								(if (and (d-Directive-chord? tag) (list? ToggleTrill::params))
									(let ()
										(d-SetSaved #f)
										(map set-option ToggleTrill::params)
										(d-DirectivePut-chord-postfix tag (string-append  (string-join (map set-option ToggleTrill::params)) " \\trill ")))
									(d-WarningDialog "Cannot complete operation - cursor moved or bad parameter list")))
							(begin  ;;;no parameters, toggle trill off/on
											(d-PlayMidiNote 78  255 9 100)
											(ToggleChordDirective tag LG-Trill "\\trill" DENEMO_OVERRIDE_ABOVE)))))</scheme>
        <label>Trill (Off/On)</label>
        <tooltip>Adds/Removes a trill to the note</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
