<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>ToggleTrill</action>
        <scheme>;;;Trill
        	(disp "We have params " ToggleTrill::params (list? ToggleTrill::params)  " ok" )
                    
             (let ((tag "ToggleTrill"))
								(if (and (d-Directive-chord? tag) (not ToggleTrill::params))
									(case (GetEditOption)
										((cancel) #f)
										((advanced) (d-DirectiveTextEdit-chord tag))
										((delete) (d-DirectiveDelete-chord tag))
										(else #f))
									(if ToggleTrill::params
										(begin ;;;FIXME check on a trill, check params    
											(d-DirectivePut-chord-postfix tag (string-append "^\\tweak #'X-offset #'" (cdr (list-ref ToggleTrill::params 0))
																																			" ^\\tweak #'Y-offset #'" (cdr (list-ref ToggleTrill::params 1)) " \\trill "))
										)
										(begin
											(d-PlayMidiNote 78  255 9 100)
											(ToggleChordDirective tag LG-Trill "\\trill" DENEMO_OVERRIDE_ABOVE)))))


				</scheme>
        <label>Trill (Off/On)</label>
        <tooltip>Adds/Removes a trill to the note</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
