<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>Tempo</action>
        <scheme>;;; Tempo Change, Midi only.
(let ((DurationFromInput "1" ) (TempoFromInput "120"))
(set! DurationFromInput (d-GetOption (string-append "Quarter" stop "Dotted Quarter" stop)))
(set! TempoFromInput (d-GetUserInput "Tempo" "Please enter a tempo value" "120"))
(d-DirectivePut-standalone-minpixels "Tempo" 20)
(d-CursorLeft)
(d-DirectivePut-standalone-override "Tempo" (logior DENEMO_OVERRIDE_TEMPO DENEMO_OVERRIDE_STEP))

;Calculate the dotted tempo but display the userone
(if (string-ci=? DurationFromInput "Dotted Quarter" )
  (d-DirectivePut-standalone-midibytes "Tempo" (number-> string (* 1.5 (string->number TempoFromInput))))
  (d-DirectivePut-standalone-midibytes "Tempo" TempoFromInput)
)

(d-DirectivePut-standalone-display "Tempo" (string-append DurationFromInput "= "  TempoFromInput))
(d-DirectivePut-standalone-ty "Tempo" -40))

(d-RefreshDisplay)</scheme>
        <label>Tempochange</label>
        <tooltip>Adds a Tempo Change, non-printing.</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
