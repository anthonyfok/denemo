<?xml version="1.0" encoding="UTF-8"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <after>LilyPondDefinition</after>
        <action>ToggleWysiwygMarks</action>
        <scheme>;;;;;;;; ToggleWysiwygMarks
(let ((tag "ToggleWysiwygMarks"))
      (d-SetSaved #f)
      (if (d-Directive-score? tag)
      	(d-DirectiveDelete-score tag)
      	(begin
      		(d-LilyPondInclude "red-dot.ly")
     		(d-DirectivePut-score-prefix tag "\\layout {
    \\context {
      \\Score
      \\printRefpoint ##f #'all-grobs
    }
  }
  "
     		)
     		 (d-DirectivePut-score-display tag (_ "Wysiwyg Marks On"))
     		 (d-InfoDialog (_ "Typeset score will have graphical objects marked with red dots\nUse these for accurate tweaking of positions via wysiwyg operations on the typeset score with mouse")))))
   </scheme>
        <_label>Typeset Red Dots (Off/On)</_label>
        <_tooltip>Typesets with red dots on the graphical objects. Use these for accurate tweaking of positions via clicking and dragging with mouse on final typeset score.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
