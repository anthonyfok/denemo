<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <after>ScoreBlockProlog</after>
        <action>RefreshDynamicDirectives</action>
        <scheme>;;;RefreshDynamicDirectives
(let loop ((number 0))
  (define tag (d-DirectiveGetNthTag-score number))
  (if tag
    (begin
      (if (positive? (logand (d-DirectiveGet-score-override tag) DENEMO_OVERRIDE_DYNAMIC))
	(let ((command (string-append "d-" tag)))
	  (eval-string command)))
      (loop (+ 1 number)))))
;;; FIXME there are 13 other types of directive to refresh ,,,      
</scheme>
        <label>Refresh Dynamic Directives</label>
        <tooltip>Re-runs any directives that may have become stale.</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
