<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <after>BookPoet</after>
        <action>TocTitle</action>
        <scheme>;;;TocTitle
(d-LilyPondInclude "book-titling.ily")
(d-PushPosition)
(while (d-PreviousMovement))
(let ((tag "TableOfContents") (title "Contents"))
(if (d-Directive-paper? tag)
	(set! title (d-DirectiveGet-paper-display tag)))
(set! title (d-GetUserInput "Table of Contents Title" "Give title for the table of contents\nBlank to delete" title))
(if (string-null? title)
	(begin
		(d-DirectiveDelete-paper tag)
		(d-DirectiveDelete-movementcontrol tag))
		(begin
			(d-DirectivePut-paper-postfix tag "\ntocTitle = \"Contents\"\n")
			(d-DirectivePut-paper-display tag title)
			(d-DirectivePut-movementcontrol-prefix tag "\\pageBreak\n  \\markuplines \\table-of-contents\n")))
(d-SetSaved #f))
(d-PopPosition)</scheme>
        <label>Table of Contents Title</label>
        <tooltip>Gives a heading for a table of contents, inserting the table in the book.</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
