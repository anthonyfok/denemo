<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row type="scheme">
        <after>LilyPondDefinition</after>
        <action>ToggleCurveControl</action>
        <scheme>;;;;;;;; ToggleCurveControl
(let ((tag "ToggleCurveControl"))
      (d-SetSaved #f)
      (if (d-Directive-score? tag)
      	(d-DirectiveDelete-score tag)
      	(begin
      		(d-LilyPondInclude "control-points.ly")
     		(d-DirectivePut-score-prefix tag "\\layout {
      					 \\override Slur #'stencil = #(display-control-points #t)
      					 \\override Tie #'stencil = #(display-control-points #t)
       					\\override PhrasingSlur #'stencil = #(display-control-points #t)
  		}
  "
     		)
     		 (d-DirectivePut-score-display tag (_ "Curve Control Points On"))
     		 (d-InfoDialog (_ "Typeset score will have curves marked with control points\nUse these for accurate reshaping of curves via wysiwyg operations on the typeset score with mouse")))))
   </scheme>
        <_label>Typeset Curve Control Points (Off/On)</_label>
        <_tooltip>Typesets with curve control points marked. Use these for accurate tweaking of shape via clicking and dragging with mouse on final typeset score.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
