<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <after>ScoreIndent</after>
        <action>HideEmptyStaffs</action>
        <scheme> ;;;;;;;;;;;;;;;Toggle HideEmptyStaffs
(let ((current "0.0"))
  (set! current (d-DirectiveGet-score-prefix "HideEmptyStaffs"))
  (if (boolean? current)
      (begin
	(d-DirectiveDelete-score "HideEmptyStaffs")
	(d-DirectivePut-score-prefix "HideEmptyStaffs" 
				     "\\layout {
                                     \\context { \\RemoveEmptyStaffContext }
                                     }"
				     )
	(d-DirectivePut-score-graphic  "HideEmptyStaffs" "Hide Empty Staffs"))
      (d-DirectiveDelete-score "HideEmptyStaffs"))
  (d-RefreshDisplay))

</scheme>
        <label>Hide Empty Staffs (Off/On)</label>
        <tooltip>Controls whether staffs containing only rests are printed.</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
