<?xml version="1.0" encoding="UTF-8"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row type="scheme">
        <after>ScoreBlockProlog</after>
        <action>LilyPondInclude</action>
        <scheme>;;;LilyPondInclude
(let ((include LilyPondInclude::params))
  (define (setinclude include)
    (define tag (string-append "LilyPondInclude:" include))
    (d-SetSaved #f)
    (d-DirectivePut-score-display tag include)
    (d-DirectivePut-score-override tag (logior DENEMO_OVERRIDE_AFFIX DENEMO_OVERRIDE_DYNAMIC))
    (d-DirectivePut-score-prefix tag (string-append "\\include \"" DENEMO_LILYPOND_DIR "/" include "\"\n")))
 ;;;;;start of procedure   
 
  (if include
      (setinclude include)
    (begin   
      (set! include (d-GetUserInput (_ "Include LilyPond File") (_ "Give LilyPond file name:") "book-titling.ily"));;;FIXME get list of possible files
      (if include
	(setinclude include)
	(d-WarningDialog (_ "LilyPondInclude unchanged"))))))</scheme>
        <_label>LilyPond Include File</_label>
        <_tooltip>Allows specification of a LilyPond include file from the Denemo provided include files.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
