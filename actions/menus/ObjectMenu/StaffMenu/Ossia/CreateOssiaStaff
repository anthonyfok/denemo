<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>CreateOssiaStaff</action>
        <scheme> ;;;;;; CreateOssiaStaff
(let ((current "voice 1"))
  (set! current (d-StaffProperties "query=denemo_name"))
  (d-AddBefore)
  (d-StaffProperties (string-append "denemo_name=Ossia_" current))
  (d-DirectivePut-score-prefix "HideEmptyStaffs" 
			       "\\layout {
                                     \\context { \\RemoveEmptyStaffContext }
                                     }")
  (d-DirectivePut-staff-prefix "ossia" "\\new Staff \\with
  {
    \\remove \"Time_signature_engraver\"
    fontSize = #-2
   \\override StaffSymbol #'staff-space = #(magstep -2)
    firstClef = ##f
  }"
			       )
  )
(d-DirectivePut-staff-override "ossia" DENEMO_OVERRIDE_LILYPOND)
(d-DirectivePut-standalone "StopStaff")
(d-DirectivePut-standalone-postfix "StopStaff" "\\stopStaff ")
(d-DirectivePut-standalone-display "StopStaff" "Ossia hide")
(d-RefreshDisplay)
</scheme>
        <label>Create Ossia Staff</label>
        <tooltip>Creates a small staff above the current staff for inserting cues, ossia passages etc. Use Show Ossia and Hide Ossia to show specific measures.</tooltip>
      </row>
    </map>
  </merge>
</Denemo>
