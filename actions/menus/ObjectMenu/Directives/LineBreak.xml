<?xml version="1.0"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>LineBreak</action>
        <scheme> ;;;;;;;;LineBreak
 (let ((tag "LineBreak"))
 (if (d-Directive-standalone?  tag)
	(d-InfoDialog "This sign denotes a Line Break. The music after this point will start on new line. This line break must be on a bar line. Use the Conditional Directives menu to make the line break applicable only to specific layouts. Delete using Del or Backspace key.")
	(begin
		(if (d-IsVoice)
			(begin
				(d-WarningDialog "The cursor is on a voice. Put line breaks in the main staff that the voice belongs to."))
			(let ((choice #f))
				(d-DirectivePut-standalone tag)
				(d-DirectivePut-standalone-postfix tag "\\break")
				(d-DirectivePut-standalone-gy tag -40)
				(d-DirectivePut-standalone-graphic tag "
L
Denemo
36")
				(d-DirectivePut-standalone-minpixels tag 10)
				(set! choice (d-GetUserInput (_ "Line Break") (_ "Should this line break apply only when printing the current part?") (_ "y")))
				(if (and choice (equal? choice (_ "y")))
					(begin
					(d-OnlyForLayout   (cons (d-StaffProperties "query=lily_name") (d-GetCurrentStaffLayoutId)))))
				(d-SetSaved #f)
				(d-RefreshDisplay))))))
</scheme>
        <_label>Line Break</_label>
        <_tooltip>(Print) Start a new line (i.e. system) at this measure.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
