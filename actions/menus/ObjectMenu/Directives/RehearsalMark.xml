<?xml version="1.0" encoding="UTF-8"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row type="scheme">
        <action>RehearsalMark</action>
        <scheme>;;; Bookmark + RehearsalMark
;;; by Nils Gey Modified RTS
(let ((tag "RehearsalMark"))
(if (d-Directive-standalone? tag)
 (let ((choice #f))
  (begin
    (set! choice (d-GetOption  (string-append cue-Delete stop cue-RestorePosition stop  cue-Advanced stop)))
    (cond
     ((boolean? choice)
      (d-WarningDialog "Operation cancelled"))
     ((equal? choice  cue-Advanced)
      (if (not (d-DirectiveTextEdit-standalone tag))
        (d-DirectiveDelete-standalone tag)))
     ((equal? choice cue-Delete)
      (d-DirectiveDelete-standalone tag))
     ((equal? choice cue-RestorePosition)
      (d-DirectivePut-standalone-prefix tag "")))
    (if choice
			(begin (d-SetSaved #f)
				(d-RefreshDisplay)))))
;;not present already
 (begin
		(d-Directive-standalone tag)
		;(d-DirectivePut-standalone-display tag "")
		(d-DirectivePut-standalone-grob tag "RehearsalMark")
		(d-DirectivePut-standalone-postfix tag  " \\mark \\default" )
		(d-DirectivePut-standalone-gx  tag  14)
		(d-DirectivePut-standalone-gy  tag  -35)
		(d-DirectivePut-standalone-minpixels  tag  30)
		(d-DirectivePut-standalone-graphic tag "RehearsalMark")
		(d-MoveCursorRight) 
		(d-SetSaved #f)
		(d-RefreshDisplay))))
</scheme>
        <_label>Add Rehearsal/Bookmark</_label>
        <_tooltip>Inserts a rehearsal mark in the score. The default is to typeset as the letters A, B, ... The display shows simply A for all bookmarks. This mark also acts as a Denemo bookmark which can be searched for.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
