<?xml version="1.0" encoding="UTF-8"?>
<Denemo>
  <merge>
    <title>A Denemo Keymap</title>
    <author>AT, JRR, RTS</author>
    <map>
      <row>
        <action>SplitMeasure</action>
        <scheme>;SplitMeasure:splits a measure 
;leave cursor at the beginning of the new measure (after the barline)
(let split ()
	(define count -1)
	(d-PushClipboard)
	(d-UnsetMark)
	(d-SetMark)
	(if   (d-MeasureRight)
	  (begin
	  	(d-CursorLeft)  
		(d-Cut)
		(d-CursorRight)
		(d-InsertMeasureBefore))
	  (begin
		(d-GoToEnd)
		(d-Cut)
		(d-AppendMeasure)
		(d-MoveToMeasureRight)))
	(d-UnsetMark)
	(RepeatUntilFail (lambda () (set! count (1+ count)) (d-PutClipObj 0 count)))
	(GoToMeasureBeginning)	
	(d-PopClipboard))</scheme>
        <_label>Split Measure at Cursor</_label>
        <_tooltip>Split the current measure into two at the cursor.</_tooltip>
      </row>
    </map>
  </merge>
</Denemo>
